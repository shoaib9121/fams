<div class="dashboard-component mx-4">
	<ngx-spinner bdColor="rgba(255, 255, 255, 0.7)" size="medium" color="#008755" type="ball-scale-multiple" name="dashboard" [fullScreen]="false"></ngx-spinner>
	<div class="content-outer" fxLayout="row wrap" fxLayoutAlign="space-around">
		<div class="main-flex-container h-100" fxLayout="row wrap" fxLayout.sm="column" fxFlex="60" fxLayoutAlign="space-between">
			
			<mat-card class="table-card min-height" fxFlex="100">
				<h4>Upcoming Issues</h4>
				<mat-divider></mat-divider>
				<mat-card-content class="overflow-auto" [ngClass]="{'table-card-content': true}">
					<table class="w-100" mat-table [dataSource]="dashBoardData?.upcoming_issues ? dashBoardData?.upcoming_issues : []">
						<ng-container matColumnDef="equipment_number">
							<th mat-header-cell *matHeaderCellDef>
                                {{ globalVars.translation["equipment_number"][globalVars.LNG] }}
                            </th>
							<td mat-cell *matCellDef="let element">
								<ng-container *ngIf="element.equipment_number">
									{{element.equipment_number}}
								</ng-container>
								<ng-container *ngIf="!element.equipment_number">-</ng-container>
							</td>
						</ng-container>
						<ng-container matColumnDef="manufacturer_id">
							<th mat-header-cell *matHeaderCellDef>Manufacturer</th>
							<td mat-cell *matCellDef="let element">
								<ng-container *ngIf="element.manufacturer_id[globalVars.LNG]">
									{{element.manufacturer_id[globalVars.LNG]}}
								</ng-container>
								<ng-container *ngIf="!element.manufacturer_id[globalVars.LNG]">-</ng-container>
							</td>
						</ng-container>
						<ng-container matColumnDef="model_id">
							<th mat-header-cell *matHeaderCellDef>Model</th>
							<td mat-cell *matCellDef="let element">
								<ng-container *ngIf="element.model_id[globalVars.LNG]">
									{{element.model_id[globalVars.LNG]}}
								</ng-container>
								<ng-container *ngIf="!element.model_id[globalVars.LNG]">-</ng-container>
							</td>
						</ng-container>
						<ng-container matColumnDef="issue_name">
							<th mat-header-cell *matHeaderCellDef>Issue Name</th>
							<td mat-cell *matCellDef="let element">
								<ng-container *ngIf="element.issue_name">
									{{ element.issue_name }}
								</ng-container>
								<ng-container *ngIf="!element.issue_name">-</ng-container>
							</td>
						</ng-container>
						<ng-container matColumnDef="priority">
							<th mat-header-cell *matHeaderCellDef>Priority</th>
							<td mat-cell *matCellDef="let element">
								<ng-container *ngIf="element.priority[globalVars.LNG]">
									{{element.priority[globalVars.LNG]}}
								</ng-container>
								<ng-container *ngIf="!element.priority[globalVars.LNG]">-</ng-container>
							</td>
						</ng-container>
						<ng-container matColumnDef="repair_type">
							<th mat-header-cell *matHeaderCellDef>Repair Type</th>
							<td mat-cell *matCellDef="let element">
								<ng-container *ngIf="element.repair_type[globalVars.LNG]">
									{{element.repair_type[globalVars.LNG]}}
								</ng-container>
								<ng-container *ngIf="!element.repair_type[globalVars.LNG]">-</ng-container>
							</td>
						</ng-container>
						<ng-container matColumnDef="symptom">
							<th mat-header-cell *matHeaderCellDef>Symptom</th>
							<td mat-cell *matCellDef="let element">
								<ng-container *ngIf="element.symptom">
									{{ element.symptom }}
								</ng-container>
								<ng-container *ngIf="!element.symptom">-</ng-container>
							</td>
						</ng-container>
						<ng-container matColumnDef="estimated_time">
							<th mat-header-cell *matHeaderCellDef>Estimated Time </th>
							<td mat-cell *matCellDef="let element">
								<ng-container *ngIf="element.estimated_time">
									{{ element.estimated_time  }}
								</ng-container>
								<ng-container *ngIf="!element.estimated_time">-</ng-container>
							</td>
						</ng-container>
						<ng-container matColumnDef="actual_time">
							<th mat-header-cell *matHeaderCellDef>Actual Time </th>
							<td mat-cell *matCellDef="let element">
								<ng-container *ngIf="element.actual_time">
									{{ element.actual_time }}
								</ng-container>
								<ng-container *ngIf="!element.actual_time">-</ng-container>
							</td>
						</ng-container>
						<ng-container matColumnDef="start_time">
							<th mat-header-cell *matHeaderCellDef>Started Time </th>
							<td mat-cell *matCellDef="let element">
								<ng-container *ngIf="element.start_time">
									{{ element.start_time | date:"d/MMM/yy, h:mm a" }}
								</ng-container>
								<ng-container *ngIf="!element.start_time">-</ng-container>
							</td>
						</ng-container>
						<ng-container matColumnDef="status">
							<th mat-header-cell *matHeaderCellDef>Status </th>
							<td mat-cell *matCellDef="let element">
								<ng-container *ngIf="element.status[globalVars.LNG]">
									{{element.status[globalVars.LNG]}}
								</ng-container>
								<ng-container *ngIf="!element.status[globalVars.LNG]">-</ng-container>
							</td>
						</ng-container>
						<tr mat-header-row *matHeaderRowDef="upcomingIssuesColumns"></tr>
						<tr mat-row *matRowDef="let row; columns: upcomingIssuesColumns" (click)="openRecordInDrawer(row)" class="clickable-row"></tr>
					</table>
				</mat-card-content>
			</mat-card>
			
			<mat-card class="table-card min-height" fxFlex="100">
				<h4>Recent Issues</h4>
				<mat-divider></mat-divider>
				<mat-card-content class="overflow-auto" [ngClass]="{'table-card-content': true}">
					<table class="w-100" mat-table [dataSource]="dashBoardData?.recent_issues ? dashBoardData?.recent_issues : []">
						<ng-container matColumnDef="equipment_number">
							<th mat-header-cell *matHeaderCellDef>
                                {{ globalVars.translation["equipment_number"][globalVars.LNG] }}
                            </th>
							<td mat-cell *matCellDef="let element">
								<ng-container *ngIf="element.equipment_number">
									{{element.equipment_number}}
								</ng-container>
								<ng-container *ngIf="!element.equipment_number">-</ng-container>
							</td>
						</ng-container>
						<ng-container matColumnDef="manufacturer_id">
							<th mat-header-cell *matHeaderCellDef>Manufacturer</th>
							<td mat-cell *matCellDef="let element">
								<ng-container *ngIf="element.manufacturer_id[globalVars.LNG]">
									{{element.manufacturer_id[globalVars.LNG]}}
								</ng-container>
								<ng-container *ngIf="!element.manufacturer_id[globalVars.LNG]">-</ng-container>
							</td>
						</ng-container>
						<ng-container matColumnDef="model_id">
							<th mat-header-cell *matHeaderCellDef>Model</th>
							<td mat-cell *matCellDef="let element">
								<ng-container *ngIf="element.model_id[globalVars.LNG]">
									{{element.model_id[globalVars.LNG]}}
								</ng-container>
								<ng-container *ngIf="!element.model_id[globalVars.LNG]">-</ng-container>
							</td>
						</ng-container>
						<ng-container matColumnDef="issue_name">
							<th mat-header-cell *matHeaderCellDef>Issue Name</th>
							<td mat-cell *matCellDef="let element">
								<ng-container *ngIf="element.issue_name">
									{{ element.issue_name }}
								</ng-container>
								<ng-container *ngIf="!element.issue_name">-</ng-container>
							</td>
						</ng-container>
						<ng-container matColumnDef="priority">
							<th mat-header-cell *matHeaderCellDef>Priority</th>
							<td mat-cell *matCellDef="let element">
								<ng-container *ngIf="element.priority[globalVars.LNG]">
									{{element.priority[globalVars.LNG]}}
								</ng-container>
								<ng-container *ngIf="!element.priority[globalVars.LNG]">-</ng-container>
							</td>
						</ng-container>
						<ng-container matColumnDef="repair_type">
							<th mat-header-cell *matHeaderCellDef>Repair Type</th>
							<td mat-cell *matCellDef="let element">
								<ng-container *ngIf="element.repair_type[globalVars.LNG]">
									{{element.repair_type[globalVars.LNG]}}
								</ng-container>
								<ng-container *ngIf="!element.repair_type[globalVars.LNG]">-</ng-container>
							</td>
						</ng-container>
						<ng-container matColumnDef="symptom">
							<th mat-header-cell *matHeaderCellDef>Symptom</th>
							<td mat-cell *matCellDef="let element">
								<ng-container *ngIf="element.symptom">
									{{ element.symptom }}
								</ng-container>
								<ng-container *ngIf="!element.symptom">-</ng-container>
							</td>
						</ng-container>
						<ng-container matColumnDef="estimated_time">
							<th mat-header-cell *matHeaderCellDef>Estimated Time </th>
							<td mat-cell *matCellDef="let element">
								<ng-container *ngIf="element.estimated_time">
									{{ element.estimated_time }}
								</ng-container>
								<ng-container *ngIf="!element.estimated_time">-</ng-container>
							</td>
						</ng-container>
						<ng-container matColumnDef="actual_time">
							<th mat-header-cell *matHeaderCellDef>Actual Time </th>
							<td mat-cell *matCellDef="let element">
								<ng-container *ngIf="element.actual_time">
									{{ element.actual_time }}
								</ng-container>
								<ng-container *ngIf="!element.actual_time">-</ng-container>
							</td>
						</ng-container>
						<ng-container matColumnDef="start_time">
							<th mat-header-cell *matHeaderCellDef>Started Time </th>
							<td mat-cell *matCellDef="let element">
								<ng-container *ngIf="element.start_time">
									{{ element.start_time | date:"d/MMM/yy, h:mm a" }}
								</ng-container>
								<ng-container *ngIf="!element.start_time">-</ng-container>
							</td>
						</ng-container>
						<ng-container matColumnDef="status">
							<th mat-header-cell *matHeaderCellDef>Status </th>
							<td mat-cell *matCellDef="let element">
								<ng-container *ngIf="element.status[globalVars.LNG]">
									{{element.status[globalVars.LNG]}}
								</ng-container>
								<ng-container *ngIf="!element.status[globalVars.LNG]">-</ng-container>
							</td>
						</ng-container>
						<tr mat-header-row *matHeaderRowDef="recentIssuesColumns"></tr>
						<tr mat-row *matRowDef="let row; columns: recentIssuesColumns" (click)="openRecordInDrawer(row)" class="clickable-row"></tr>
					</table>
				</mat-card-content>
			</mat-card>
			
		</div>
	</div>
</div>
